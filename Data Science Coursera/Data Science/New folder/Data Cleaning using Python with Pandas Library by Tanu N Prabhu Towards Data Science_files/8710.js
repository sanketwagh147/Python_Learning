(self.webpackChunklite=self.webpackChunklite||[]).push([[8710],{55459:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=r.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const l=function(e){return r.createElement("svg",o({width:29,height:29},e),a)}},21356:(e,t,n)=>{"use strict";n.d(t,{x:()=>A,S:()=>D});var r=n(28655),o=n.n(r),a=n(71439),l=n(67294),i=n(12291),s=n(42631),u=n(89970),c=n(17920),p=n(60002),d=n(41236),f=n(86654),v=n(88817),h=n(70162),b=n(3369),m=n(965),g=n(58006),y=n(76532),C=n(1932),S=n(324),w=n(62181),O=n(95760),P=n(51512),E=n(65347),k=n(67297),I=n(55573),j=n(27952);function H(){var e=o()(["\n  fragment MultiVote_post on Post {\n    id\n    clapCount\n    creator {\n      id\n      ...SusiClickable_user\n    }\n    isPublished\n    ...SusiClickable_post\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    ...MultiVoteCount_post\n  }\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}var x=function(e){var t,n=e.post,r=e.buttonStyle,o=e.hasDialog,a=e.shouldShowResponsiveLabelText,H=void 0!==a&&a,x=e.shouldHideClapsText,A=void 0!==x&&x,D=e.shouldHideClapsCount,T=void 0!==D&&D,F=e.susiEntry,L=e.verticalClapsText,U=void 0!==L&&L,_=(0,m.CP)(),q=(0,y.H)().value,M=null!==(t=null==q?void 0:q.id)&&void 0!==t?t:"",V=(0,C.Tf)(n).viewerEdge,R=(0,k.v9)((function(e){return e.config.authDomain})),N=(0,k.b$)((function(e){return e.multiVote.clapsPerPost})),G=(0,i.I0)(),J=function(e){return G((0,E.at)(e))},z=(0,O.Av)(),Q=(0,P.pK)(),B=(0,I.l)(N,n,V),$=B.clapCount,K=B.viewerClapCount,W=B.viewerHasClappedSinceFetch,Y=l.useCallback((function(){if(K&&K>=h.S2)return"Viewer exceeded authorized claps limit.";J({postId:n.id,clapCount:$+1,viewerClapCount:K+1,viewerHasClappedSinceFetch:!0})}),[K,n.id,$]),Z=l.useCallback((function(){if(!K)return"Viewer did not clap.";_(n,M,-K,V),J({postId:n.id,clapCount:$-K,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),z.event("post.clientUnvote",{postId:n.id,postIds:[n.id],unvoteCount:K,source:Q})}),[K,n.id,$,M,V,Q]),X=l.useCallback((function(e){_(n,M,e,V),z.event("post.clientUpvote",{postId:n.id,postIds:[n.id],voteCount:e,source:Q})}),[n.id,M,V,Q]),ee=(0,b.m)({onIncrementClaps:Y,onUndoClaps:Z,onSubmitClapsAccumulated:X}),te=ee.clappedAt,ne=ee.onFloatEnd,re=ee.removeBurst,oe=ee.clap,ae=ee.undoClaps,le=ee.isPopping,ie=ee.isShowingViewerClapCount,se=ee.burstOffsets,ue=ee.onPopEnd;l.useEffect((function(){return function(){var e;e={postId:n.id},G((0,E.HQ)(e))}}),[]);var ce,pe=n.collection,de=n.creator,fe=n.id,ve=n.isPublished,he=n.isLimitedState,be=(ce=!(!de||de.id!==M),he?"This feature is temporarily disabled":ve?ce?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),me=(0,h.wH)(r,H),ge=me.isObvious,ye=me.isSubtleForDesktop,Ce=me.alwaysShowClapsLabel,Se=me.hasClapsLabel,we=me.buttonScale,Oe=!!(K&&K>0),Pe=!!($&&$>0),Ee=pe&&pe.slug?(0,j.JLP)(R,pe.slug,fe):(0,j.kIi)(R,fe);return l.createElement(c.l,{isSubtleForDesktop:ye,verticalClapsText:U},l.createElement(d.$,{isObvious:ge,buttonStyle:r,isSubtleForDesktop:ye,disableReason:be},M||be?l.createElement(l.Fragment,null,ie&&l.createElement(S.N8,null,l.createElement(p.q,{count:K,clappedAt:te,placement:ge?"FAR":"NEAR",onFloatEnd:ne})),l.createElement(v.v,{isPopping:le,onPopEnd:ue},l.createElement(u.d,{scale:we,canUndo:Oe,isCircle:ge,isFilled:Oe,isUndoSuppressed:se.length>0,disableReason:be,onClickAndHold:oe,onUndo:ae,shouldHideClapsText:A})),se.map((function(e){return l.createElement(s.P,{key:e,isLarge:ge,offset:e,onBurstEnd:re})}))):l.createElement(w.R9,{operation:"register",post:n,user:n.creator,actionUrl:Ee,susiEntry:F},l.createElement(u.d,{isCircle:ge,scale:we}))),Pe&&!T&&(!ie||Ce)&&l.createElement(f.W,{buttonStyle:r,isSubtleForDesktop:ye},l.createElement(g._,{shouldShowNetwork:ge,post:n,clapCount:$,showFullNumber:W,hasLabel:Se,hasDialog:o,shouldShowResponsiveLabelText:ye||H,shouldHideClapsText:A})))},A=(0,a.Ps)(H(),w.qU,w.Vm,g.U),D=function(e){var t;return l.createElement(P.cW,{source:{postId:null===(t=e.post)||void 0===t?void 0:t.id},extendSource:!0},l.createElement(x,e))}},66210:(e,t,n)=>{"use strict";n.d(t,{V:()=>h,k:()=>b});var r=n(28655),o=n.n(r),a=n(23493),l=n.n(a),i=n(71439),s=n(67294),u=n(95760),c=n(51512),p=n(27108),d=n(8403),f=n(21146);function v(){var e=o()(["\n  fragment PostScrollTracker_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n  }\n"]);return v=function(){return e},e}function h(e,t,n,r){var o=(0,u.Av)(),a=(0,c.pK)(),i=(0,d.he)(),v=(0,c.Qi)(),h=Date.now(),b=null,m=s.useCallback(l()((function(){if(e.current){var r=(0,f.L6)(e.current);if((0,f.pn)(r)){var l=Date.now(),s=(0,f.tM)(r),u=(0,f.UO)(),c=(0,f.t_)(),p=Math.round(s.top),d=Math.round(s.top+s.height),m=u.top,g=u.top+c.height,y=u.height,C={postIds:[t.id],collectionIds:[t.collection?t.collection.id:""],sequenceIds:[t.sequence?t.sequence.sequenceId:""],sources:n?["post_page"]:[v],tops:[p],bottoms:[d],areFullPosts:[!0],loggedAt:l,timeDiff:null!==b?Math.round(l-b):0,scrollTop:m,scrollBottom:g,scrollableHeight:y,viewStartedAt:h},S={referrer:i,referrerSource:a};n?o.event("post.streamScrolled",C,S):o.event("post.streamScrolled",C),b=l}}}),1e3),[t,n]);s.useEffect((function(){m();var e=null!=r&&r.current?(0,p.jC)(null==r?void 0:r.current):p.V6;return e.on("scroll_end",m),function(){e.off("scroll_end",m)}}),[m])}var b=(0,i.Ps)(v())},83024:(e,t,n)=>{"use strict";n.d(t,{Gj:()=>h,eu:()=>b,Sz:()=>m});var r=n(28655),o=n.n(r),a=n(59713),l=n.n(a),i=n(50361),s=n.n(i),u=n(71439),c=n(14391);function p(){var e=o()(["\n  fragment buildQuotePreviewParagraph_quote on Quote {\n    paragraphs {\n      id\n      text\n      type\n      markups {\n        end\n        start\n        type\n      }\n    }\n    startOffset\n    endOffset\n  }\n"]);return p=function(){return e},e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t=100;if(1!==e.paragraphs.length)return null;var n=s()(e.paragraphs[0]),r=n.text||"",o=0,a=e.startOffset||0,l=e.endOffset||r.length;if(r.length-l>t&&(r=r.substring(0,l+t)+"…"),a>t){var i=a-t;r="…"+r.substring(i),o=i-1}n.text=r,n.type=c.NJ.P,n.markups.unshift({end:l,start:a,type:c.Jh.HIGHLIGHT});var u,p=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw a}}}}(n.markups);try{for(p.s();!(u=p.n()).done;){var d=u.value;d.start-=o,d.end-=o}}catch(e){p.e(e)}finally{p.f()}return n},b=function(e){if(1!==e.paragraphs.length)return null;var t=e.paragraphs[0].text||"",n=e.startOffset||0,r=e.endOffset||t.length,o=t.slice(n,r);return o.length>=185&&(o=o.substring(0,185)+"..."),f(f({},e.paragraphs[0]),{},{text:o,type:c.NJ.P,markups:[{end:o.length,start:0,type:c.Jh.HIGHLIGHT,anchorType:null,href:null,linkMetadata:null,userId:null}],hasDropCap:null,dropCapImage:null})},m=(0,u.Ps)(p())}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8710.890112f0.chunk.js.map