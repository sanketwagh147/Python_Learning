(self.webpackChunklite=self.webpackChunklite||[]).push([[570],{30570:(e,n,t)=>{"use strict";t.d(n,{sK:()=>b,L0:()=>h,q9:()=>v});var o=t(28655),r=t.n(o),i=t(63038),s=t.n(i),a=t(71439),u=t(67294),l=t(16904),d=t(53976),c=t(77648);function p(){var e=r()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f=u.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){}}),b=function(){return u.useContext(f)},h=function(e){var n=e.children,t=u.useState(null),o=s()(t,2),r=o[0],i=o[1],a=u.useState(!1),c=s()(a,2),p=c[0],b=c[1],h=u.useState(null),v=s()(h,2),S=v[0],P=v[1],g=(0,d.VB)({name:"enable_inline_expansion",placeholder:null});return u.createElement(f.Provider,{value:{expandedPostId:r,setExpandedPostId:i,postInView:p,setPostInView:b,expandedPost:S,setExpandedPost:P}},u.createElement(l.k,{post:S,preload:!!g},n))},v=(0,a.Ps)(p(),c.w)},45893:(e,n,t)=>{"use strict";var o;t.d(n,{Fz:()=>o,yo:()=>r,ZR:()=>i}),function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(o||(o={}));var r=3,i="414px"},16904:(e,n,t)=>{"use strict";t.d(n,{k:()=>w});var o=t(63038),r=t.n(o),i=t(67294),s=t(49486),a=t(68356),u=t.n(a),l=t(19725),d=u()({loader:function(){return Promise.all([t.e(8342),t.e(4586),t.e(3930),t.e(8710),t.e(8698),t.e(9590),t.e(7417)]).then(t.bind(t,35052))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[35052]},loading:function(){return null},render:(0,l.n)("ThreadedResponsesSidebar")}),c=t(319),p=t.n(c),f=t(38125),b=t.n(f),h=t(72393),v=t(77180),S=t(27108),P=t(8403),g=function(e){var n=e.preload,t=e.children,o=i.useState(!1),s=r()(o,2),a=s[0],u=s[1],l=(0,v.F)(),c=!!(0,P.Wd)("responsesOpen"),f=i.useState(!1),g=r()(f,2),y=g[0],w=g[1],x=i.useRef(!0),m=i.useRef(0),T=i.useState(!1),E=r()(T,2),R=E[0],C=E[1],I=i.useCallback((function(){return w(!0)}),[]),O=i.useState([]),k=r()(O,2),V=k[0],j=k[1],z=i.useCallback((function(e){x.current=!1,j([].concat(p()(V),[e]))}),[V]),L=i.useCallback((function(){j(b()(V))}),[V]),A=i.useCallback((function(){w(!1),j([]),x.current=!0}),[x]);i.useEffect((function(){C(!0),w(c)}),[c]);var _=function(){window.innerWidth<l.breakpoints.md&&u(!0)};return i.useEffect((function(){return _(),S.V6.on("resize",_),function(){return S.V6.off("resize",_)}}),[]),i.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return a&&null!=t&&t.style&&(y?(t.style.top="-".concat(m.current,"px"),m.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=m.current)),function(){a&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=m.current)}}),[y]),i.useEffect((function(){n&&d.preload()}),[n]),i.createElement(h.f.Provider,{value:{addContinueThisThreadSidebar:z,openSidebar:I,closeSidebar:A}},t({showPreviousSidebar:L,hasLoaded:R,initialSidebarRender:x,isVisible:y,continueThisThreadPosts:V,openSidebar:I,cleanupSidebar:A}))},y=t(92214),w=function(e){var n=e.children,t=e.post,o=e.preload,a=void 0===o||o,u=i.useState(void 0),l=r()(u,2),c=l[0],p=l[1],f=i.useCallback((function(e){return function(n){p(n),e()}}),[]);return i.createElement(g,{preload:a},(function(e){var o=e.showPreviousSidebar,r=e.hasLoaded,a=e.initialSidebarRender,u=e.isVisible,l=e.continueThisThreadPosts,b=e.openSidebar,h=e.cleanupSidebar;return i.createElement(s.Q.Provider,{value:{openSidebarToRespondToHighlight:f(b)}},!!t&&r&&i.createElement(d,{isResponsesSidebarVisible:u&&0===l.length,parentPost:t,inResponseToQuote:c,setInResponseToQuote:p,showPreviousSidebar:o,cleanupSidebar:h,initialSidebarRender:!!a.current}),!!t&&r&&l.map((function(e,n,r){var s=(0,y.iI)(n);return i.createElement(d,{key:t.id,isResponsesSidebarVisible:u&&n===r.length-1,parentPost:t,inResponseToQuote:c,setInResponseToQuote:p,continueThisThreadPost:e,continueThisThreadPostDepth:s,showPreviousSidebar:o,cleanupSidebar:h,initialSidebarRender:!!a.current})})),n)}))}},72393:(e,n,t)=>{"use strict";t.d(n,{f:()=>o});var o=t(67294).createContext({addContinueThisThreadSidebar:function(){return null},openSidebar:function(){return null},closeSidebar:function(){return null}})},92214:(e,n,t)=>{"use strict";t.d(n,{p4:()=>d,ec:()=>c,Tz:()=>p,aA:()=>f,Dd:()=>b,vL:()=>h,iI:()=>v,CC:()=>l,xd:()=>S,aj:()=>P});var o=t(59713),r=t.n(o),i=t(45893),s=t(80637);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l,d=10,c=function(e){var n={top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,pointerEvents:"none"};return e&&(n.transition="opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"),n},p=function(e,n){return function(t){var o=r()({width:i.ZR,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,s.sm)(t),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"});return e||(o.visibility="hidden"),n||(o.transition="transform 0s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0s cubic-bezier(0.23, 1, 0.32, 1) 0s"),o}},f=function(e,n){return function(t){if(e){var o=t.breakpoints.md-.02;return n<=o?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},b=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},h=function(e,n,t,o,r){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&n&&!t&&r&&(o(!0),r())},v=function(e){return(i.yo-1)*(e+1)};!function(e){e.CATALOG="list",e.STORY="story"}(l||(l={}));var S=function(e,n){return e===l.CATALOG?{rootCatalogId:n}:e===l.STORY?{rootPostId:n}:{}},P=function(e,n,t,o){if(o){var r,i,s,a=(null===(r=o.threadedPostResponses)||void 0===r?void 0:r.posts)||[];return{responses:{posts:[u(u({},o),{},{threadedPostResponses:{posts:a,autoExpandedPostIds:null!==(i=o.threadedPostResponses)&&void 0!==i&&i.posts?null===(s=o.threadedPostResponses)||void 0===s?void 0:s.posts.map((function(e){return e.id})):[],pagingInfo:null,__typename:"ThreadedPostResponseConnection"}})],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"},showCreateReplyEditor:a.length<1}}return!e&&n?{responses:{posts:[],pagingInfo:null,autoExpandedPostIds:null,__typename:"ThreadedPostResponseConnection"},showCreateReplyEditor:!1}:{responses:t,showCreateReplyEditor:!1}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/570.e0a3eb44.chunk.js.map